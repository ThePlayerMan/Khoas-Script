local player = game.Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local camera = workspace.CurrentCamera
local UIS = game:GetService("UserInputService")

-- GUI Setup
local screenGui = Instance.new("ScreenGui", player:WaitForChild("PlayerGui"))
screenGui.Name = "DevDebugMenu"
screenGui.ResetOnSpawn = false

local frame = Instance.new("Frame")
frame.Size = UDim2.new(0, 250, 0, 500)
frame.Position = UDim2.new(0, 10, 0, 10)
frame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
frame.BackgroundTransparency = 0.1
frame.Visible = false -- hidden by default
frame.Parent = screenGui

-- Button & Slider Helpers
local yPos = 10
local function createButton(name, callback)
	local btn = Instance.new("TextButton")
	btn.Size = UDim2.new(0, 230, 0, 30)
	btn.Position = UDim2.new(0, 10, 0, yPos)
	btn.Text = name
	btn.TextColor3 = Color3.new(1, 1, 1)
	btn.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
	btn.Parent = frame
	btn.MouseButton1Click:Connect(callback)
	yPos += 40
end

local function createSlider(labelText, minValue, maxValue, defaultValue, callback)
	local label = Instance.new("TextLabel")
	label.Size = UDim2.new(0, 230, 0, 20)
	label.Position = UDim2.new(0, 10, 0, yPos)
	label.Text = labelText
	label.TextColor3 = Color3.new(1, 1, 1)
	label.BackgroundTransparency = 1
	label.Parent = frame
	yPos += 20

	local slider = Instance.new("TextBox")
	slider.Size = UDim2.new(0, 230, 0, 30)
	slider.Position = UDim2.new(0, 10, 0, yPos)
	slider.Text = tostring(defaultValue)
	slider.TextColor3 = Color3.new(1, 1, 1)
	slider.BackgroundColor3 = Color3.fromRGB(80, 80, 80)
	slider.Parent = frame
	slider.FocusLost:Connect(function()
		local num = tonumber(slider.Text)
		if num then
			num = math.clamp(num, minValue, maxValue)
			callback(num)
		end
	end)
	yPos += 40
end

-- WalkSpeed / JumpPower
createSlider("WalkSpeed", 8, 100, 16, function(value)
	local hum = character:FindFirstChildOfClass("Humanoid")
	if hum then hum.WalkSpeed = value end
end)

createSlider("JumpPower", 20, 150, 50, function(value)
	local hum = character:FindFirstChildOfClass("Humanoid")
	if hum then hum.JumpPower = value end
end)

-- Teleport Buttons
createButton("Teleport to TP1", function()
	local tp = workspace:FindFirstChild("TP1")
	if tp and character:FindFirstChild("HumanoidRootPart") then
		character.HumanoidRootPart.CFrame = tp.CFrame
	end
end)

createButton("Teleport to TP2", function()
	local tp = workspace:FindFirstChild("TP2")
	if tp and character:FindFirstChild("HumanoidRootPart") then
		character.HumanoidRootPart.CFrame = tp.CFrame
	end
end)

-- Create Custom TP Point
createButton("üìç Create TP Point (TP_Custom)", function()
	local existing = workspace:FindFirstChild("TP_Custom")
	if existing then existing:Destroy() end

	local newTP = Instance.new("Part")
	newTP.Name = "TP_Custom"
	newTP.Size = Vector3.new(2, 1, 2)
	newTP.Anchored = true
	newTP.Position = character:FindFirstChild("HumanoidRootPart").Position
	newTP.BrickColor = BrickColor.new("Bright yellow")
	newTP.Material = Enum.Material.Neon
	newTP.CanCollide = false
	newTP.Parent = workspace
end)

-- Teleport to Custom TP
createButton("Teleport to TP_Custom", function()
	local tp = workspace:FindFirstChild("TP_Custom")
	if tp and character:FindFirstChild("HumanoidRootPart") then
		character.HumanoidRootPart.CFrame = tp.CFrame + Vector3.new(0, 3, 0)
	end
end)

-- ESP Toggle
local espEnabled = false
createButton("Toggle ESP (All Humanoids)", function()
	espEnabled = not espEnabled
	for _, model in pairs(workspace:GetChildren()) do
		if model:IsA("Model") and model:FindFirstChild("Humanoid") and model:FindFirstChild("HumanoidRootPart") then
			local root = model.HumanoidRootPart
			local existing = root:FindFirstChild("DebugESP")
			if espEnabled and not existing then
				local adorn = Instance.new("BoxHandleAdornment")
				adorn.Name = "DebugESP"
				adorn.Size = Vector3.new(3, 5, 3)
				adorn.Color3 = Color3.fromRGB(255, 0, 0)
				adorn.AlwaysOnTop = true
				adorn.ZIndex = 10
				adorn.Adornee = root
				adorn.Parent = root
			elseif not espEnabled and existing then
				existing:Destroy()
			end
		end
	end
end)

-- Snap Camera to Nearest Humanoid Head
createButton("Snap Camera to Nearest Head", function()
	local closest = nil
	local closestDist = math.huge
	local rootPart = character:FindFirstChild("HumanoidRootPart")

	if not rootPart then return end

	for _, model in pairs(workspace:GetChildren()) do
		if model:IsA("Model") and model:FindFirstChild("Humanoid") and model:FindFirstChild("Head") then
			local dist = (model.Head.Position - rootPart.Position).Magnitude
			if dist < closestDist then
				closestDist = dist
				closest = model.Head
			end
		end
	end

	if closest then
		camera.CFrame = CFrame.new(camera.CFrame.Position, closest.Position)
	end
end)

-- üîÅ Right Shift Toggle for Menu + Mouse Lock
local menuVisible = false
UIS.InputBegan:Connect(function(input, isTyping)
	if isTyping then return end
	if input.KeyCode == Enum.KeyCode.RightShift then
		menuVisible = not menuVisible
		frame.Visible = menuVisible

		if menuVisible then
			UIS.MouseBehavior = Enum.MouseBehavior.Default
			UIS.MouseIconEnabled = true
		else
			UIS.MouseBehavior = Enum.MouseBehavior.LockCenter
			UIS.MouseIconEnabled = false
		end
	end
end)

    end
})

print("Khoas Fruit Farm Loaded - Press Right Ctrl to Open/Close UI")o Open/Close UI")
